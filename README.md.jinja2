{%- macro picture(light_src, dark_src='', img_attrs={}) -%}
    {% if not dark_src %}
        {% set dark_src = light_src %}
    {% endif %}
<picture>
  <source
    srcset="{{ dark_src }}"
    media="(prefers-color-scheme: dark)"
  />
  <source
    srcset="{{ light_src }}"
    media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"
  />
  <img {% for name, value in img_attrs.items() -%}
    {{ '{}="{}" '.format(name, value) }}
  {%- endfor -%}/>
</picture>
{%- endmacro -%}

{%- macro link_w_picture(alt, href, light_src, dark_src='', img_attrs={}) -%}
<a alt="{{ alt }}" href="{{ href }}">
  {{ picture(light_src, dark_src) | indent(2) }}
</a>
{%- endmacro -%}

{# 
    Options for github-readme-stats cards:
        https://github.com/anuraghazra/github-readme-stats?tab=readme-ov-file#common-options
#}

{%- macro card_gist(alt, user, gistid) -%}
    {% set href = "https://gist.github.com/{}/{}".format(user, gistid) %}
    {% set base_src  = "https://github-readme-stats.vercel.app/api/gist?id={}&border_radius=20&cache_seconds=86400".format(gistid) %}
    {% set light_src = base_src ~ "&theme=light" %}
    {% set dark_src  = base_src ~ "&theme=dark" %}

    {{- link_w_picture(alt, href, light_src, dark_src) -}}
{%- endmacro -%}

{%- macro card_github(user, repo) -%}
    {% set alt  = "GitHub Repository {}/{}".format(user, repo) %}
    {% set href = "https://github.com/{}/{}".format(user, repo) %}
    {% set base_src  = "https://github-readme-stats.vercel.app/api/pin?username={}&repo={}&border_radius=20&cache_seconds=86400".format(user, repo) %}
    {% set light_src = base_src ~ "&theme=light" %}
    {% set dark_src  = base_src ~ "&theme=dark" %}

    {{- link_w_picture(alt, href, light_src, dark_src) -}}
{%- endmacro -%}

{%- macro shields_badge_url(badge, color="#", style='', ltext='', lcolor='', logo='', logo_color='', logo_size='', cache='') -%}
    {{- "https://img.shields.io/" -}}
    {{- badge -}}
    {{- '?' if '?' not in badge -}}
    {{- "&style=" ~ style             if style -}}
    {{- "&label=" ~ ltext | urlencode if ltext -}}
    {{- "&labelColor=" ~ lcolor       if lcolor -}}
    {{- "&color=" ~ color             if color -}}
    {{- "&logo=" ~ logo               if logo -}}
    {{- "&logoColor=" ~ logo_color    if logo_color -}}
    {{- "&logoSize=" ~ logo_size      if logo_size -}}
    {{- "&cacheSeconds=" ~ cache      if cache -}}
{%- endmacro -%}

{%- macro static_badge_url(rtext, color="#", style='', ltext='', lcolor='', logo='', logo_color='', logo_size='', cache='') -%}
    {% set badge = "badge/{}-{}".format(rtext | urlencode, color) %}

    {{- shields_badge_url(badge, color="", style=style, ltext=ltext, lcolor=lcolor, logo=logo, logo_color=logo_color, cache=cache) -}}
{%- endmacro -%}

{%- macro badge_social(alt, href, label, logo, logo_color_light='', logo_color_dark='') -%}
    {% set alt = alt ~ " Social" %}
    {% set base_kwargs = {
        "rtext": label,
        "logo": logo,
        "style": "for-the-badge",
    } %}
    {% set light_src = static_badge_url(color="white",  logo_color=logo_color_light, **base_kwargs) %}
    {% set dark_src  = static_badge_url(color="151515", logo_color=logo_color_dark, **base_kwargs) %}

    {{- link_w_picture(alt, href, light_src, dark_src) -}}
{%- endmacro -%}

{%- set openhub_logo = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuODU4IiBoZWlnaHQ9IjE3Ny44NTgiIHhtbG5zOnY9Imh0dHBzOi8vdmVjdGEuaW8vbmFubyI+PGRlZnM+PHN0eWxlPkBmb250LWZhY2V7Zm9udC1mYW1pbHk6InJvYm90b3JlZ3VsYXIiO3NyYzp1cmwoZGF0YTphcHBsaWNhdGlvbi9mb250LXdvZmYyO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGQwOUdNZ0FCQUFBQUFBb1VBQklBQUFBQUcxZ0FBQW12QUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFQMFpHVkUwY0dqUWJsMEljZ2xvR1lBQ0RFZ2c2Q1lSbEVRZ0tnMENEUXdzdUFBRTJBaVFEV0FRZ0JZWjhCNEZkRElGN0crMFpJeEhDeGdHQUpLOGcrNnNEM2hEL1ZBNHFFWkZCeFV0Z3FzWG83SjVPTjJHNEFSQXYvQjlmS2w0YVZ5VHdxbzA0aUQ4Ymd1ZUp6ZXo5Z1FGUHNxeFVqSXF1dUxZbllnYm5acmxhMjJJUkVvbTBFYnhwRXBIMGo3L1ozaUVhR1Vva1o0anF0dmZtUnlKVVloTjZSVkZ1dUthREtTVjVxcHpPK2YvNjkvMjdBeWlEazVYeHpRaE94cTdnaXBrUE52MytZT1dTck1xLzN2K3NxMUNXYmRzMktORnRFKy8xaTNhQ29EL2p2L1pMN1grNTJ4REtLRnFWT2FHaW8xSWtWeFp1YjBNTFlVUWhDNHdLd1JFWUQ2NUNrcTl3dFRWQzFyaHFYR3l6Uy9CcFR3SnNuUVZ2aTB6MThibi9RQUVDOFBaUk81MEU4T2lQd1JVQUgyOTV5eGI0VUdTQTZVQ01RaENLRVV4QUFZSUNBaUNIQUFJSTRMRytzMkRmd0dBQnNjMzJJUlBpVyswcUdaRGZmaE51UTBNUUlKK25BSm43bHF2TmRtWXVSTGJiZ215SUFnS0FJQ2dzTWdnZzVGQ0FNQlBCUTdPSUlUNFVHZ3ZsejhZRVAvQ0xXTUxpeGc0QUJxQzMzZ0Zzd0VON3MvVGVCNEhwajhNK3VnaG85a3MvRGtFdjFSTE4xUTlrRUVzVXVjcFBWb2VocGRjS3ZoQk8yVFRYZWxzMmhucWduWXFnQjVVeE9JQ3dDQ1UwdGk3WC9HS2xWRTFnUUJjS0JmckVId3laWmd3aDZKZ1p3N3NBQjR4V0dOS2JYR2RFQUk1RU01WnpkV1BDa1hQRVBGaFRxZWpLYmZmM0VHMUdVYXJQWHZycEk5aC9vSyt1Z1diTDFDWlBTNzExVFovMm0xcWJhcS8vbW0xVFg1dTlobGxBUHphUkpDZlUwRDVRODRadGZOZU5Rd2JxUHlXdG9mZks2RXU3cFpHS21ta2F5MnFvL05iREFCcnpFTjVlZ3RJQ3EvbDRsRUtjOEIzZHUvK05NUEF5RWRjMTRJMW1HdGI5OVJrT2J0UEdmUXkzK3dDUVgwcTgvc0FwTDE3NzErWkhwNTAvVVR6Y2IwUk0vMmltMFR0UXRmeHJqTmt5NkRKT1hvcTNXVncwSHFCTm9CZjZaTERXblRQZmplRk9lOEZxUEJxMVpISHUvUlVnVVhLN0IrSjZBYnJsREZOa2xnd0F1UUdnRXRxZy85WW91ME1BYUJpQUtuYWI4MTE3dnNBeGdpNTY2b3NEcnMwZU9zdlFXamMzdFk5MjB0dDg3M2pYalV3bmVUcnR2UW55dnRsQjA5UjRTSHpzOU4ycC9IMFFBL2ZBZENyeFlKcHNOeEFmdWdFWERJT1cyd0U2dnIxdVExOWRHR29CNlduT0ZsTFFWM1JYNW1RVWhjc2tZWm1kQUJTa29kS3pGeHNYSjVBWXhJeTVEVDcwWmpBdjQ4M0JSZXBDUDlYaWUwa2RsUURHMENra3QzdENWV21VUXo5RlJRb1dna1ErNnZIWTllRjk0Ui9wNGtOV1lIZXYyMFFxZWxjdHlHSmdWZFZpZkhKZ01kRzlzbGcxT2JSWWZWVy83bU8rd1daVzdmOTE0eGlmUGdCKzNwcEpGUU1FNU1zQ2hPTVpnSkJCaUFBQkJKZ0lJZkxhQUdkVko4dkphRXg5cnE0Rm1SZjlWakplWXNzQ0ZBQUFINkx5VStCNkFESEE0QnUzb2NLLytGL0wvK0RzcGxhTGtZc0F6QmFkQURFS01BQURtSTBBY0R3REFXWmpzak5nT2prTUhFQVJFak5rN0hlOXVETGVhUEcvK1R4WVBUNTRndVIvNjlNV3VxT3RQblErK1BTRDI5NmVnU0NPTFJZSUJnRFN0cnF3OGdJbVZtaCtUSXV2R1cvanVtTmVyZ3NjNWlSbnVjUVZidkVxRDNLdEc5M2xRUjduSFk1M3FudWM2d3g3ZWZ1NHlqMzFPamhCZ3RBMmpIVXJqR3hwSUtxaVlObHJWK2psZTM2bzZTc2t0Q0lxQXlMajN3anNjaWc1MnFzYWhPWVpNT1EyVVlTdWJzWFJwVE5neW1LSDRJTHZxWC9zbldaNVl0Vi9CakZaOG9WZWFZMkJMVTJFYjFUR3doWEljUDNoREZneVhXQWRQYVVRbjY4L3lvQXVoKzJwRnVsMTVYWmtGRXdsV1hHOEsrTkREU2Qvdzk1cGdwRTBMQWhtOGdqSW1tNjJNSnNRRml4bW5HdG01dFM5Vkp1bjE3RFFJQlkwVDZ3RVg4YWYyOEtDK0NSWnNPMzFGVkdUYUp4YXBqaHdkcm80elNOQ28xckhsMHlTWW55RmllVkNYVUpVN0ljdWoyVFNTdWdXYzQ0MnY4d1lPV1RGOXlqT0dYMDNvNzJxbjlWQ1lLQlprbWZKeXNxRjlGMHptWVNxdGo3dUlCQ3RUT0tXUEN3eWs0QU5lMklLWFQzaUFSZTViUUFSSzRoVm45dUxhaS9NZ0FtbnpXUW5xQk5iS01tTXhGSHJ6SGRrZGhocUkvYkR5dGtMOW94RjhnSFZVbDFiYTdVOXpUbG1JSnJSZncwRmgxaWx4RFFCVWNzY1JaZ0cxclY4cVB1UW8yNnoydnRDZ3NVUnoyREdYS3lac0dJSkprekFwL0QzeU1zUkpKK1hCYUFFZ0RMQUFwcUFOUUFBSnZBdUNySE1ndUprWXBwQmxESDkvYkw3YkJwMmcraEtmVE9yL1gwOG5URTNra1BlK2NRLzdxTzM0T0Qvb1hmc3gyK3ZkZkJiODZudnJDV0h2ZTBlNnMzVnhTMTArZ2l0RWY4KzgrLzBudjNjMlJYWG9KTUhkMzEvMTRmUXlVT1h2SDlKNXg3bmJmUHlLZDNldGRmZjVGMTlVdGRyNjc5K1VvZDlWWEs5ZS9XcFRmZSsvYy9uK0x2dWZpYWovaldORjRydXVmM0ZJdlZibWFhbXBucUFORlMyM1d5YnM3N0xUUzM5N3NqQVVHU1Z6dERSSkNIVW12MnZsTUtWdVJtVUpuYnRXQnU5SkxyMlZzTkR3dExVTUw2U0pLaE1lRDMxL2E4U1ZaUDR1ZFNSMHNTc1NXMy9xelNVVXFxcXVYbERhVnBzZjNXelZwU21zNTJ2SklsTFFNUWlYNW51bDNxK01wL0lDbEZCbEdaMGMzTXBzS2xieGNNMlN5RmNFck5zK0sxR3dkQXRERXkxcm5kWkFMVXdHbmp4SitkRzJiYmZuT1B3S2U5NklQL3R4OVdQQWc0S0FBRm50LzhHd0d3RzJrVVF4eTlSMzlJSFFQNEJVVGw5SzlmMHdld3BBOVhISmQzeEdQSXR5QzRBdi85V3ZCT3lGRmdGQXY0eG1VMkFBQ1hFS0FBVWdxSUVCRG9CZ0lqM01SRFRCVFlFRWdzQkcySkZobTJ4UWNEZTJHUTJoMlBORWk3R0ZyTjVITnQwK1dPWFFCWmdueUtwd0FGTHBBZUhySit0Y1liVjh5aCtraEkxSFQ5RmxhckFUNU5SRzlvL3czUzEvVnZ5bHNGTWRUaTlISzRib2xHb09LU0dLcXFwSm1hUXc2RXdTWkJodG9Nc01kMU1KbVJWQ2NtRzF5TmhKT1JNY3BSbEZjZWVnM05TZHFVNE1lMFFXMWUyaDNua1NsVVlvNEcwbXdVVk9iVTAwdHJJdG8ybE81c3hFb0ZzZzJtYlFIWjMrYzZOa0ZoV21BR2hQYm5EYmJKejliR3dXVUZMbllwVWNrNXkxMEJYYzdUUlZoempBNzdnZ2NUR05rc1lzb2VFbzZSbVJLaWtUY3BkOER6TTFaY2YwZzF1Q0ZtMTZZbFgwVldta2tyMitoNmRaUk0xUEd0eGNpRlhSeDFuUzRjYTAxWFhORElucnd3V1hJdGtUemJCdWFlcWxxczF1Q0F5YnVmR3lCcHkyRWdMOVRSNDFlNlNpQnJxdWhZaDIrMEcyamdiY3BTUnpxYW0zYUNtZkFZTWZKU3I4WnhvQ0pHWS9BQ1EzNVlqOFZoTFFKUVlZbUpRQ215dXBjVVNXeHh4eFJOZkFna2xJMW5KU1lGRVVtaHR0YnE3dVpqanVjZjZVbloyZG4ya3pqV3N5V2E1amp1Z0hKU0w4bEErS2tDRnFBZ1ZveEoxalhGdW83cUEySmRYOTFTY0o3Q3UwcFk0M2VxZVdDZXVjMi9nN2lNdmNyb05SYjF4N01FNkRrc0hXMTg1WUZBL0RMdHZyaUQxM3plZ2JCdTBpVFVBcG9uT1ZPd2l6M0cxcGhOd0o4SEV2c3RkTkhGS3dUTjI0NklzK0RvZ28rL2ZpRXVOeGkwUHdwQk00eXdFWm1FMnoyckt3ZmZZYWN4enc1RHNXd3NLVEhOWjhScEZOZ0FBKSBmb3JtYXQoIndvZmYiKTsgZm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3R5bGU6bm9ybWFsO308L3N0eWxlPjwvZGVmcz48ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjA4NTI2NSAwIDAgMS41NzA3OTMgODUuMzY0NDcgOTcuMTUwMDcxKSIgZmlsdGVyPSJ1cmwoI0EpIj48ZmlsdGVyIGlkPSJBIiB5PSItLjE1MSIgaGVpZ2h0PSIxLjMwMiIgeD0iLS4wNzgiIHdpZHRoPSIxLjE1NiI+PGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VBbHBoYSIgc3RkRGV2aWF0aW9uPSI1Ii8+PGZlT2Zmc2V0IHJlc3VsdD0iQSIvPjxmZUZsb29kIGZsb29kLWNvbG9yPSIjZmZmIiBmbG9vZC1vcGFjaXR5PSIxIi8+PGZlQ29tcG9zaXRlIGluMj0iQSIgb3BlcmF0b3I9ImluIi8+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlLz48ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZlTWVyZ2U+PC9maWx0ZXI+PHRleHQgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgZm9udC1mYW1pbHk9InJvYm90b3JlZ3VsYXIiIGZvbnQtc2l6ZT0iMTA1IiBmb250LXdlaWdodD0iOTAwIiBzdHlsZT0id2hpdGUtc3BhY2U6cHJlIiBmaWxsPSIjNWEyYTgxIj48dHNwYW4geD0iLTc5LjgiIHk9IjMyLjk4Ij5PPC90c3Bhbj48dHNwYW4geD0iMS4wNSIgeT0iMzIuOTgiPkg8L3RzcGFuPjwvdGV4dD48L2c+PC9zdmc+" -%}

{#- ------------------------------------------------------------------------------------------ -#}

{{ card_gist("gsettings-array.py",           "rindeal", "c5786254410028f760ee2351d884a744") }}
{{ card_gist("xkb-list-layouts-variants.sh", "rindeal", "1891455c258b22f3e31e1da8f9821c28") }}
{{ card_github("rindeal", "Amalgamate") }}

---

<p>
  {{ badge_social("GitHub", "https://github.com/rindeal", "GitHub", "github", logo_color_light="151515") | indent(2) }}
  {{ badge_social("Gist", "https://gist.github.com/rindeal", "Gist", "github", logo_color_light="151515") | indent(2) }}
  {{ badge_social("GitLab", "https://gitlab.com/rindeal", "GitLab", "gitlab") | indent(2) }}
  {{ badge_social("GitLab Namespace", "https://gitlab.com/rindeal-ns", "GitLab NS", "gitlab") | indent(2) }}
  {{ badge_social("Black Duck Open Hub", "https://openhub.net/accounts/rindeal", "Open Hub", openhub_logo) | indent(2) }}
  {{ badge_social("Stack Exchange", "https://meta.stackoverflow.com/users/2566213/rindeal", "Stack Exchange", "stackexchange") | indent(2) }}
  {{ badge_social("EasyEDA", "https://oshwlab.com/rindeal?tab=project", "EasyEDA", "easyeda", logo_color_light="151515") | indent(2) }}
</p>

<br>
{% set base_kwargs = {
    "badge": "endpoint?url=https://hits.dwyl.com/x52ua8pfqt9msh3v/p9n8mckq65xrgzb7.json",
    "style": "flat-square", "logo": "googleanalytics", "cache": 0,
}%}
{% set light_url = shields_badge_url(color="white", lcolor="white", logo_color="AAAAAA", **base_kwargs) %}
{% set dark_url  = shields_badge_url(color="black", lcolor="black", logo_color="555555", **base_kwargs) %}
{{ picture(light_url, dark_url, {"alt": "Visitors Counter", "height": 16, "align": "right"}) }}
